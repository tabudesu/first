<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>バーコードリーダーを使ってみよう！</title>
</head>
<body>
    <h1>入力画面</h1>
    <p>バーコードリーダーを使用してバーコードを読み取ってください。</p>
    <textarea id="input" maxlength="13"></textarea>

    <button type="button" onclick="MyFunction1()">
        確定
    </button>
    <p>検索結果</p>
    <span id="output"></span>


    <script>
        function MyFunction1() {
            var txt = document.getElementById("input");

            var request = new XMLHttpRequest();

            var serarhkeyword = document.getElementById("input").innerText;
            var applicationId = "1049198666783003336";

            var requestStr = "https://app.rakuten.co.jp/services/api/IchibaItem/" +
                "Search/20170706?format=json&keyword=" +
                    serarhkeyword + "&applicationId=" + applicationId;

            request.open('GET', requestStr , true);
            request.responseType = 'json';

            request.onload = function () {
                var data = this.response;
                console.log(data);
                const from_json = JSON.parse(data);

                console.log(from_json); // 確認用

                console.log(from_json.Items[0].Item.itemName) 
                document.getElementById("output").textContent = from_json.Items[0].Item.itemName;

            };

            request.send();



            //document.getElementById("output").textContent = txt.textContent;
        }

    </script>
</body>
</html>
